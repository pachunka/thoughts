<body>
<script>
customElements.define('ipfs-thought',class extends HTMLElement {
	constructor () {
		super();
		this.style.border = '1px solid';
		this.style.borderRadius = '4px';
		this.style.display = 'inline-block';
		this.style.margin = '1em';
		this.style.padding = '1em';
		console.log('boo')
	}
	static get observedAttributes() { return ['cid'] }
	attributeChangedCallback(nm,ol,nu) {
		console.log('yay')
		;(async () => {
			if (!/[a-zA-Z0-9]/.test(nu)) throw new Error("Bad CID:" + nu);
			let url = `https://${ nu }.ipfs.dweb.link/thought.txt`;
			console.log("Gonna go get",url);
			let ftc = await fetch(url);
			let txt = await ftc.text();
			this.textContent = txt
		})();
	}
});
//
const lines = `ADF26198-411C-414A-9EB3-2C981305110E`.trim().split('\n');
document.body.insertAdjacentHTML(
	 'beforeEnd'
	,lines
		.filter(ln => /^\/post /.test(ln))
		.map(ln => `<ipfs-thought cid="${ attrOK(ln.substr(6).trim()) }"></ipfs-thought>`)
		.join('')
);
</script>